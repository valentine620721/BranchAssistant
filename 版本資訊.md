# 版本資訊
## Fubon_LangChain_Project_v1.1 
1. 只有 Flask 後端
2. SQL查詢功能(固定的System prompt)
## Fubon_LangChain_Project_v2.0
1. 加入 React 前端
2. SQL查詢功能(固定的System prompt)
## Fubon_LangChain_Project_v2.1 
1. SQL查詢功能(彈性的System prompt)：有 Oracle 和 File 資料夾，新增 SQL 資料夾和 tools 但尚未啟用，還在調適。<br>
   後端 | 每個對應的 tools 都會建立 tables.txt 存放不同 table 的資訊 (table名稱 和 table欄位名稱)，讀取 txt 文件進 system prompt 使用。<br>
2. RAG 功能：<br>
   前端 | 上傳 (點擊迴紋針 -> 檔案上傳 -> 等待文件處理完畢 -> 跳出上傳成功方框)、查詢 (點擊功能選單圖示 -> 點選"資料查詢" -> 對話框輸入 -> 傳送)<br>
3. SQL 查詢後結果處理：會儲存三個查詢後的結果，還沒實作完針對查詢結果再操作的功能<br>
   前端 | 結果回傳 (跳出新視窗，可以查看三個查詢過的結果)、操作 (點擊功能選單圖示 -> 點選"資料分析" -> 對話框輸入 -> 傳送)<br>

## Fubon_LangChain_Project_v3.0 
Langchain 的 tool description 都會讀取對應資料夾底下的 metadata.txt
1. SQL查詢功能(彈性的System prompt)：有 Oracle 和 SQL 資料夾。<br>
   後端 | 每個對應的 tools 都會建立 tables.txt 存放不同 table 的資訊 (table名稱 和 table欄位名稱)，讀取 txt 文件進 system prompt 使用。<br>
2. RAG 功能： 有 File 資料夾<br>
   後端 | 對應 searchFromFile tool
3. SQL 深入查詢：會儲存五個查詢後的結果，可以透過"上述結果中"來對已查詢的結果做進一步查詢<br>
   後端 | 對應 searchFromResult tool
4. 前端增加左側切換頁面的導引欄(聊天室、RAG資料管理)，查詢結果呈現頁面新增下載功能。

## Fubon_LangChain_Project_v3.1
更新 Langchain_Agent 中的 SQL 查詢架構 <br>
使用者輸入問題 => 透過 metadata.txt 篩選 需要查詢的資料表 => 從 tables.txt 篩選對應的所有欄位資訊 => 篩選需要用到的欄位 => 生成 SQL 語句<br>
1. 後端接收到問題後 (app.py 中 /get_answer)，會透過 Agent 解析問題並選擇 (Oracle, MSSQL)，接著生成 需要查詢的資料表名稱 (table1, table2, ...) 作為結果 (action_input)，回傳 制式問題(請問以上是否符合您的需求? 符合，請回答'是'; 不符合，請回答'否')。
2. 前端接收制式問題後，使用者若回覆"是" (app.py 中 /get_query)，利用 結果 (action_input) 中的資料表對應的所有欄位名稱和 metadata 從 tables.txt 篩選出來，接著匯入 Langchain_Agent 中的 generate_table_inform()，生成對應的資料表 需要查詢的欄位名稱和 metadata (table_inform)，將前一步結果再匯入 generate_SQL() 生成 SQL 語句查詢。
